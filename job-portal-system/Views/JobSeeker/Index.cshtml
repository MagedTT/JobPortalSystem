@using System.Security.Cryptography
@model JobSeekerProfileViewModel

@{
    ViewData["Title"] = $"{Model.FirstName} {Model.LastName} Profile";
}

<div class="container border border-white rounded-5 p-4" style="background-color: #e4e7ec">
    <div class="row">
        <div class="d-flex align-items-center">
            <div class="col-3">
                @if (Model.ImagePath is not null)
                {
                    <img class="profile-image rounded-circle" src="@($"/Images/{Model.ImagePath}")" />
                }
                else
                {
                    <img class="profile-image rounded-circle" src="/Images/defaultImage.jpg">
                }
            </div>

            <div class="col-3">
                <h3>@Model.FirstName @Model.LastName</h3>
                <i class="bi bi-geo-alt-fill"></i>
                <span>@Model.Location</span>
            </div>

            <div class="col-3">
                @if (Model.CVPath is not null)
                {
                    <a class="btn btn-outline-dark" asp-action="DownloadCV" asp-route-cvPath="@Model.CVPath"
                        asp-controller="JobSeeker">View CV</a>
                }

                else
                {
                    <button class="btn btn-outline-dark">No CV is Uploaded</button>
                }
            </div>

            <div class="col-3 d-flex justify-content-center">
                <button class="btn btn-outline-dark" type="button" data-bs-toggle="offcanvas"
                    data-bs-target="#offcanvasWithBothOptions" aria-controls="offcanvasWithBothOptions">View More
                    Options
                </button>
            </div>
        </div>
    </div>

    <div class="d-flex flex-column justify-content-center align-items-center">
        <div class="row mt-5 d-flex justify-content-center w-50">
            <h3 class="text-center">Education</h3>
            <p class="p-3 bg-success text-white text-center border rounded-3">@Model.Education</p>
        </div>

        <div class="row mt-5 d-flex justify-content-center w-50">
            <h3 class="text-center">Years of Experience</h3>
            <p class="p-3 bg-success text-white text-center border rounded-3">@Model.ExperienceYears</p>
        </div>

        <div class="row mt-5 d-flex flex-row justify-content-center">
            <h3 class="text-center">Skills</h3>
            @if (Model.Skills is null)
            {
                <button class="btn btn-outline-dark">No Skills Added Yet</button>
            }
            else
            {
                foreach (var skill in Model.Skills)
                {
                    <button class="btn btn-outline-dark">@skill</button>
                }
            }

        </div>
    </div>
</div>

<div class="offcanvas offcanvas-start text-white" data-bs-scroll="true" style="background-color: #0d1117;" tabindex="-1"
    id="offcanvasWithBothOptions" aria-labelledby="offcanvasWithBothOptionsLabel">
    <div class="offcanvas-header">
        <h5 class="offcanvas-title" id="offcanvasWithBothOptionsLabel">More options</h5>
        <button type="button" class="btn-close text-reset" data-bs-dismiss="offcanvas" aria-label="Close"></button>
    </div>
    <div class="offcanvas-body">
        <div class="d-flex justify-content-center mb-5">
            <a asp-action="EditJobSeekerProfile" asp-controller="JobSeeker" asp-route-id="@Model.UserId"
                class="text-decoration-none text-white">Edit
                Profile</a>
        </div>

        <div class="d-flex justify-content-center mt-5">
            <a asp-action="GetFavoriteJobs" asp-controller="JobSeeker" class="text-decoration-none text-white">View
                Favorite Jobs</a>
        </div>
    </div>
</div>