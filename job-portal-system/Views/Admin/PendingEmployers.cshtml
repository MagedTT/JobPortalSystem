@model job_portal_system.Models.ViewModels.PendingEmployersViewModel

@{
    ViewData["Title"] = "Employers and Job Seekers";
}



<div class="container mt-4">
    <div class="row g-4">
        <div class="col-md-6">
            <div class="card p-4 rounded-4 shadow-lg bg-dark text-light">
                <h3 class="mb-3">Employers</h3>
                <table class="table table-dark table-hover table-bordered admin-table rounded-3">
                    <thead>
                        <tr>
                            <th>Company</th>
                            <th>Email</th>
                            <th>Location</th>
                            <th>Status</th>
                            <th>Action</th>
                        </tr>
                    </thead>
                    <tbody>
                        @foreach (var emp in Model.Employers)
                        {
                            <tr>
                                <td>@emp.CompanyName</td>
                                <td>@emp.User.Email</td>
                                <td>@emp.Location</td>
                                <td>
                                    @if (emp.IsApproved)
                                    {
                                        <span class="badge bg-success">Approved</span>
                                    }
                                    else
                                    {
                                        <span class="badge bg-warning text-dark">Pending</span>
                                    }
                                </td>
                                <td>
                                    @if (!emp.IsApproved)
                                    {
                                        <form asp-action="ApproveEmployer" method="post">
                                            <input type="hidden" name="id" value="@emp.Id" />
                                            <button type="submit" class="btn btn-success btn-sm">Approve</button>
                                        </form>
                                    }
                                    else
                                    {
                                        <button class="btn btn-secondary btn-sm" disabled>Approved</button>
                                    }
                                </td>
                            </tr>
                        }
                    </tbody>
                </table>
                <nav class="mt-3">
                    <ul class="pagination justify-content-center">
                        <li class="page-item @(Model.EmployerPage == 1 ? "disabled" : "")">
                            <a class="page-link" href="?employerPage=@(Model.EmployerPage-1)&jobSeekerPage=@Model.JobSeekerPage&pageSize=@Model.PageSize">Previous</a>
                        </li>
                        @for (int i = 1; i <= Model.EmployerTotalPages; i++)
                        {
                            <li class="page-item @(Model.EmployerPage == i ? "active" : "")">
                                <a class="page-link" href="?employerPage=@i&jobSeekerPage=@Model.JobSeekerPage&pageSize=@Model.PageSize">@i</a>
                            </li>
                        }
                        <li class="page-item @(Model.EmployerPage >= Model.EmployerTotalPages ? "disabled" : "")">
                            <a class="page-link" href="?employerPage=@(Model.EmployerPage+1)&jobSeekerPage=@Model.JobSeekerPage&pageSize=@Model.PageSize">Next</a>
                        </li>
                    </ul>
                </nav>
            </div>
        </div>
        <div class="col-md-6">
            <div class="card p-4 rounded-4 shadow-lg bg-dark text-light">
                <h3 class="mb-3">Job Seekers</h3>
                <table class="table table-dark table-hover table-bordered admin-table rounded-3">
                    <thead>
                        <tr>
                            <th>Name</th>
                            <th>Email</th>
                            <th>Location</th>
                            <th>Status</th>
                            <th>Action</th>
                        </tr>
                    </thead>
                    <tbody>
                        @foreach (var js in Model.JobSeekers)
                        {
                            <tr>
                                <td>@js.FirstName @js.LastName</td>
                                <td>@js.User.Email</td>
                                <td>@js.Location</td>
                                <td>
                                    @if (js.IsApproved)
                                    {
                                        <span class="badge bg-success">Approved</span>
                                    }
                                    else
                                    {
                                        <span class="badge bg-warning text-dark">Pending</span>
                                    }
                                </td>
                                <td>
                                    @if (!js.IsApproved)
                                    {
                                        <form asp-action="ApproveJobSeeker" method="post">
                                            <input type="hidden" name="id" value="@js.Id" />
                                            <button type="submit" class="btn btn-success btn-sm">Approve</button>
                                        </form>
                                    }
                                    else
                                    {
                                        <button class="btn btn-secondary btn-sm" disabled>Approved</button>
                                    }
                                </td>
                            </tr>
                        }
                    </tbody>
                </table>
                <nav class="mt-3">
                    <ul class="pagination justify-content-center">
                        <li class="page-item @(Model.JobSeekerPage == 1 ? "disabled" : "")">
                            <a class="page-link" href="?employerPage=@Model.EmployerPage&jobSeekerPage=@(Model.JobSeekerPage-1)&pageSize=@Model.PageSize">Previous</a>
                        </li>
                        @for (int i = 1; i <= Model.JobSeekerTotalPages; i++)
                        {
                            <li class="page-item @(Model.JobSeekerPage == i ? "active" : "")">
                                <a class="page-link" href="?employerPage=@Model.EmployerPage&jobSeekerPage=@i&pageSize=@Model.PageSize">@i</a>
                            </li>
                        }
                        <li class="page-item @(Model.JobSeekerPage >= Model.JobSeekerTotalPages ? "disabled" : "")">
                            <a class="page-link" href="?employerPage=@Model.EmployerPage&jobSeekerPage=@(Model.JobSeekerPage+1)&pageSize=@Model.PageSize">Next</a>
                        </li>
                    </ul>
                </nav>
            </div>
        </div>
    </div>
</div>
